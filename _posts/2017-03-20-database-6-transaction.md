---
layout: post
title: 트랜잭션과 회복, 병행제어
category: 데이터베이스
tags:
- DBMS
- 트랜잭션
- 회복과 병행제어
---

### 트랜잭션의 정의

* 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위
* 데이터베이스 시스템에서 복구 및 병행 수행 시 처리되는 작업의 논리적 단위
* 하나의 트랜잭션은 commit되거나 rollback된다
* 데이터베이스 회복의 단위

### 트랜잭션의 특성

* 원자성: 트랜잭션의 연산은 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않아야 함
* 일관성
* 독립성: 두 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행중 다른 트랜잭션의 연산이 끼어들 수 없음
* 지속성: 성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영되야 함

### 회복(Recovery)

* 트랜잭션의 처리를 수행하는 도중 장애가 발생하여 데이터베이스가 손상되었을 때 손상되기 이전의 상태로 복구시키는 작업
* DBMS가 메모리 덤프, 로그를 이용하여 수행한다.

### 병행 제어(Concurrency Control)

* 다중 프로그램의 이점을 활용하여 동시에 여러 개의 트랜잭션을 병행 수행시킬 때, 동시에 실행되는 트랜잭션들이 데이터베이스의 일관성을 파괴하지 않도록 트랜잭션 간의 상호작용을 제어하는 것
* 로킹(Locking)
  * 주요 데이터의 액세스를 상호 배타적으로 하는 것
  * 트랜잭션들이 어떤 로킹 단위를 액세스하기 전에 lock을 요청해서 lock이 허락되어야만 그 로킹 단위를 액세스할 수 있도록 하는 기법
  * 로킹 단위(Locking Granularity)
    * 병행 제어에서 한꺼번에 로킹할 수 있는 데이터 단위
    * 데이터베이스, 파일, 레코드, 필드 등은 로킹 단위가 될 수 있다.
    * 로킹 단위가 크면 로크 수가 작아 관리하기 쉽지만 병행성 수준이 낮아지고,
    * 로킹 단위가 작으면 로크 수가 많아 관리하기 복잡하지만 병행성 수준이 높아진다.
